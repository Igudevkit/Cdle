<!DOCTYPE html> <!-- Declara o tipo do documento como HTML5 -->
<html> <!-- In√≠cio do documento HTML -->
<head> <!-- Cabe√ßalho da p√°gina, cont√©m metadados e estilos -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" /> <!-- Responsividade em dispositivos m√≥veis -->
  <title>Spot by Specs</title> <!-- T√≠tulo da aba do navegador -->

  <style> <!-- In√≠cio do bloco de estilos CSS -->
    * {
      box-sizing: border-box; /* Inclui padding e border no c√°lculo do tamanho */
    }

    body {
      font-family: Arial, sans-serif; /* Define a fonte padr√£o */
      background: #1a3a2a; /* Cor de fundo escura */
      color: #e0e0e0; /* Cor do texto */
      margin: 0; /* Remove margens */
      padding: 20px; /* Espa√ßamento interno */
      display: flex; /* Usa flexbox */
      flex-direction: column; /* Empilha os elementos verticalmente */
      align-items: center; /* Centraliza os filhos horizontalmente */
      min-height: 100vh; /* Altura m√≠nima da tela */
      transition: all 0.3s ease; /* Anima√ß√µes suaves para altera√ß√µes de estilo */
    }

    h1 {
      margin: 1rem 0; /* Espa√ßo acima e abaixo do t√≠tulo */
      font-size: 2.5rem; /* Tamanho da fonte grande */
      color: #a0e0a0; /* Cor verde clara */
      text-align: center; /* Centraliza o texto */
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.6); /* Sombra no texto */
    }

    #controls {
      display: flex; /* Layout flex√≠vel */
      justify-content: space-between; /* Espa√ßo igual entre os itens */
      align-items: center; /* Alinha os itens verticalmente */
      gap: 1rem; /* Espa√ßamento entre os itens */
      margin-bottom: 2rem; /* Espa√ßo inferior */
      width: 100%; /* Largura total */
      max-width: 700px; /* Largura m√°xima */
    }

    button {
      background: #38a169; /* Cor de fundo verde */
      color: #fff; /* Cor do texto branco */
      border: none; /* Remove bordas */
      border-radius: 8px; /* Bordas arredondadas */
      padding: 0.75rem 1.5rem; /* Espa√ßamento interno */
      font-size: 1.1rem; /* Tamanho da fonte */
      cursor: pointer; /* Cursor de clique */
      transition: transform 0.2s; /* Anima√ß√£o ao passar o mouse */
      min-width: 120px; /* Largura m√≠nima */
    }

    button:focus {
      outline: none; /* Remove contorno padr√£o ao focar */
      transform: scale(1.05); /* Aumenta levemente o bot√£o */
    }

    .search-box {
      flex: 1; /* Ocupa o m√°ximo de espa√ßo dispon√≠vel */
      position: relative; /* Permite posicionamento absoluto de elementos filhos */
      background: #2d5339; /* Cor de fundo da busca */
      border: 1px solid #4a6d4e; /* Borda levemente destacada */
      border-radius: 8px; /* Arredondamento */
      padding: 0.5rem; /* Espa√ßo interno */
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.4); /* Sombra discreta */
    }

    .search-box input {
      width: 100%; /* Ocupa toda a largura */
      border: none; /* Sem borda */
      border-radius: 4px; /* Leve arredondamento */
      padding: 0.5rem; /* Espa√ßo interno */
      background: #1e2d1a; /* Fundo escuro */
      color: #e0e0e0; /* Cor do texto */
      font-size: 1rem; /* Tamanho padr√£o de texto */
    }

    .search-box input::placeholder {
      color: #a0b29f; /* Cor do texto do placeholder */
    }

    .search-box input:focus {
      outline: none; /* Remove a borda de foco padr√£o */
      box-shadow: 0 0 4px #38a169; /* Destaque verde ao focar */
    }

    .suggestions {
      position: absolute; /* Posiciona abaixo do input */
      top: 100%; /* Imediatamente abaixo do campo de busca */
      left: 0; right: 0; /* Estica horizontalmente */
      background: #1e2d1a; /* Cor de fundo escura */
      border: 1px solid #4a6d4e; /* Borda com cor similar √† busca */
      border-radius: 4px; /* Arredondamento */
      max-height: 150px; /* Altura m√°xima da lista */
      overflow-y: auto; /* Permite rolagem vertical */
      z-index: 100; /* Coloca acima de outros elementos */
      display: none; /* Oculta por padr√£o */
    }

    .suggestion-item {
      padding: 0.5rem; /* Espa√ßamento interno */
      cursor: pointer; /* Muda o cursor ao passar */
      color: #e0e0e0; /* Cor do texto */
    }

    .suggestion-item:hover {
      background: #38a169; /* Fundo verde ao passar o mouse */
      color: #fff; /* Texto branco */
    }
    
    .info-content {
      background: #2d5339; /* Cor de fundo escura para a √°rea de detalhes */
      padding: 1rem; /* Espa√ßo interno */
      border-radius: 8px; /* Arredondamento */
      margin-top: 0.5rem; /* Espa√ßo acima do bloco */
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3); /* Sombra */
      transform: scaleY(0); /* Inicialmente encolhido verticalmente */
      transform-origin: top; /* Come√ßa a expans√£o do topo */
      transition: transform 0.3s ease; /* Transi√ß√£o suave na expans√£o */
      display: none; /* Oculto inicialmente */
    }

    .info-content.show {
      display: block; /* Exibe o bloco quando a classe 'show' est√° presente */
      transform: scaleY(1); /* Expande verticalmente */
    }

    table {
      border-collapse: collapse; /* Remove espa√ßos entre bordas das c√©lulas */
      width: 100%; /* Ocupa toda a largura poss√≠vel */
      max-width: 700px; /* Largura m√°xima da tabela */
      background: #2d5339; /* Fundo escuro da tabela */
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.4); /* Sombra ao redor */
      border-radius: 8px; /* Bordas arredondadas */
      overflow: hidden; /* Oculta partes arredondadas fora da √°rea */
    }

    th, td {
      padding: 1rem; /* Espa√ßo interno */
      text-align: left; /* Alinhamento √† esquerda */
      border-bottom: 1px solid #4a6d4e; /* Linha divis√≥ria entre linhas */
    }

    th {
      background-color: #3a7a57; /* Cor de fundo dos cabe√ßalhos */
      color: #ffffff; /* Cor do texto */
      font-weight: bold; /* Negrito */
    }

    tr:hover {
      background-color: #3e5c47; /* Cor de fundo ao passar o mouse sobre uma linha */
    }

    .highlight {
      background-color: #38a169 !important; /* Cor de destaque em verde */
      color: #ffffff; /* Cor do texto branco */
    }

    @media (max-width: 600px) {
      #controls {
        flex-direction: column; /* Empilha os bot√µes verticalmente em telas pequenas */
        align-items: stretch; /* Estica os itens para ocupar largura total */
      }

      .search-box input {
        font-size: 1rem; /* Mant√©m tamanho leg√≠vel em dispositivos m√≥veis */
      }

      table, th, td {
        font-size: 0.9rem; /* Reduz levemente o texto da tabela */
      }

      h1 {
        font-size: 2rem; /* Reduz tamanho do t√≠tulo em telas pequenas */
      }
    }
  </style> <!-- Fim dos estilos CSS -->
  </head>

<body>
  <!-- Pop-up de jogo oculto inicialmente -->
  <div id="gamePopup" class="popup hidden">
    <div class="popup-content" id="popupContent">
      <!-- Bot√£o para fechar o pop-up, chama a fun√ß√£o closePopup() -->
      <button class="close-btn" onclick="closePopup()">‚úñ</button>
      <!-- √Årea para exibir a mensagem do pop-up -->
      <div id="popupMessage"></div>
      <!-- Extras do vencedor (ocultos inicialmente) -->
      <div id="winnerExtras" class="hidden">
        <!-- Campo de texto para o nome do vencedor -->
        <input type="text" id="winnerName" placeholder="Seu nome..." />
        <!-- Bot√£o para exportar o resultado -->
        <button onclick="exportResult()">Exportar Resultado</button>
      </div>
    </div>
  </div>
  
  <!-- T√≠tulo principal do jogo -->
  <h1>Spot by Specs</h1>

  <!-- Bot√£o de informa√ß√£o (√≠cone "i") -->
  <button id="infoBtn" class="info-btn">
    ‚ìò
  </button>
  
  <!-- Conte√∫do que ser√° exibido ao clicar no bot√£o de informa√ß√µes -->
  <div id="infoContent" class="info-content">
    <!-- Informa√ß√µes da vers√£o e do desenvolvedor -->
    <p>Vers√£o Beta 0.1.1</p>
    <p>Desenvolvido por:</p>
    <p>Igor Rodrigues da Silva</p>
    <p>igor.rodrigues@intelbras.com.br</p>
  </div>

  <!-- Bot√£o de configura√ß√£o (√≠cone de engrenagem), com estilo espec√≠fico -->
  <button id="devBtn" class="info-btn" style="right: 40px;">‚öô</button>

  <!-- Campo para inserir uma senha de desenvolvedor -->
  <div id="devContent" class="info-content">
    <input type="text" id="devInput" placeholder="Senha dev..." />
  </div>

  <!-- Controles do jogo -->
  <div id="controls" class="shadow">
    <!-- Bot√£o para palpitar, provavelmente para adivinhar algo no jogo -->
    <button id="guessBtn">Palpitar</button>
    <div class="search-box">
      <!-- Campo de pesquisa para digitar o nome do produto -->
      <input id="searchBox" type="text" placeholder="Digite o produto..." autocomplete="off">
      <!-- Sugest√µes que ser√£o exibidas enquanto o usu√°rio digita -->
      <div id="suggestions" class="suggestions"></div>
    </div>
    <!-- Bot√£o para iniciar um novo jogo -->
    <button id="newGameBtn">Novo Jogo</button>
    <!-- Bot√£o para abrir o manual em uma nova aba -->
    <button id="manualBtn" onclick="window.open('manual.html','_blank')">Manual</button>
  </div>

  <!-- Tabela para exibir informa√ß√µes dos produtos -->
  <table id="board">
    <thead>
      <tr>
        <th>Produto</th>
        <th>Tipo</th>
        <th>Capac. Usu√°rios</th>
        <th>Autentica√ß√£o</th>
        <th>Comunica√ß√£o</th>
        <th>Grau IP</th>
        <th>Frequ√™ncia (MHz/KHz)</th>
        <th>Rede</th>
        <th>Fornecedor</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <!-- Inclus√£o do script html2canvas, que pode ser usado para capturar a tela ou elementos da p√°gina -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <!-- Inclus√£o do script externo com o c√≥digo espec√≠fico dos produtos -->
  <script src="produtos.js"></script>
  <script>
// Carrega os sons usados no jogo
const audioVitoria = new Audio('som/Vitoria.mp3');
const audioDerrota = new Audio('som/perdeu.mp3');
const audioPalpite = new Audio('som/pp.mp3');

// Obt√©m refer√™ncias para os elementos do DOM relacionados a informa√ß√µes e configura√ß√µes
const infoBtn = document.getElementById("infoBtn");
const infoContent = document.getElementById("infoContent");

// Exibe o modal de informa√ß√µes quando o mouse entra sobre o bot√£o
infoBtn.addEventListener("mouseenter", () => {
  infoContent.classList.add("show");
});

// Oculta o modal de informa√ß√µes quando o mouse sai do bot√£o
infoBtn.addEventListener("mouseleave", () => {
  infoContent.classList.remove("show");
});

// Obt√©m refer√™ncias para os elementos do DOM relacionados ao painel de desenvolvedor
const devBtn = document.getElementById("devBtn");
const devContent = document.getElementById("devContent");
const devInput = document.getElementById("devInput");

// Exibe ou oculta o painel de desenvolvedor ao clicar no bot√£o
devBtn.addEventListener("click", () => {
  devContent.classList.toggle("show");
  if (devContent.classList.contains("show")) {
    devInput.focus(); // Foca no campo de entrada quando o painel √© mostrado
  }
});

// Verifica a senha do desenvolvedor quando a tecla "Enter" √© pressionada no campo de entrada
devInput.addEventListener("keydown", (e) => {
  if (e.key === "Enter") {
    if (devInput.value.trim().toLowerCase() === "eusoudev") {
      alert(`Produto secreto: ${target.nome}`); // Exibe o nome do produto secreto se a senha for correta
    } else {
      alert("C√≥digo incorreto!"); // Exibe mensagem de erro caso a senha esteja errada
    }
    devInput.value = ""; // Limpa o campo de entrada
    devContent.classList.remove("show"); // Fecha o painel de desenvolvedor
  }
});

const MAX_TRIES = 10; // N√∫mero m√°ximo de tentativas
const MAX_SUG = 3; // N√∫mero m√°ximo de sugest√µes
let target, tries; // Declara as vari√°veis para o produto alvo e tentativas
let gameOver = false; // Controle de final de jogo

// Obt√©m refer√™ncias para os elementos relacionados √† caixa de pesquisa e sugest√µes
const sb = document.getElementById("searchBox");
const sugC = document.getElementById("suggestions");
const tbod = document.querySelector("#board tbody");

// Evento de input para mostrar as sugest√µes enquanto o usu√°rio digita
sb.addEventListener("input", () => showSug(sb.value));

// Evento de pressionamento da tecla "Enter" para processar a tentativa de palpite
sb.addEventListener("keydown", (e) => {
  if (e.key === "Enter") {
    e.preventDefault(); // Impede o comportamento padr√£o do formul√°rio
    hideSug(); // Esconde as sugest√µes
    play(); // Chama a fun√ß√£o que realiza a tentativa de palpite
  }
});

// Fun√ß√£o para reiniciar o jogo
function reset() {
  tbod.innerHTML = ""; // Limpa a tabela
  tries = 0; // Reseta o contador de tentativas
  target = PRODUCTS[Math.floor(Math.random() * PRODUCTS.length)]; // Escolhe um novo produto aleat√≥rio
  sb.value = ""; // Limpa o campo de pesquisa
  hideSug(); // Esconde as sugest√µes
  sb.disabled = false; // Habilita o campo de pesquisa
  gameOver = false; // Reseta o status de fim de jogo
  sb.focus(); // Foca no campo de pesquisa
  document.getElementById("guessBtn").disabled = false; // Habilita o bot√£o de palpite
}

// Fun√ß√£o para obter sugest√µes baseadas no texto digitado
function getSug(q) {
  if (!q.trim()) return []; // Retorna um array vazio se a entrada estiver vazia
  return PRODUCTS.filter(p => p.nome.toLowerCase().includes(q.toLowerCase())).slice(0, MAX_SUG);
}

// Fun√ß√£o para exibir sugest√µes com base na pesquisa
function showSug(q) {
  const opts = getSug(q);
  if (opts.length) {
    sugC.style.display = "block"; // Exibe a lista de sugest√µes
    sugC.innerHTML = opts.map(o => `<div class="suggestion-item">${o.nome}</div>`).join(""); // Preenche com as sugest√µes
    document.querySelectorAll(".suggestion-item").forEach((el, i) => {
      el.onclick = () => {
        sb.value = opts[i].nome; // Preenche o campo de pesquisa com a sugest√£o clicada
        hideSug(); // Esconde as sugest√µes
        play(); // Chama a fun√ß√£o para realizar o palpite
      };
    });
  } else {
    hideSug(); // Se n√£o houver sugest√µes, esconde a lista
  }
}

// Fun√ß√£o para esconder a lista de sugest√µes
function hideSug() {
  sugC.style.display = "none"; // Esconde o cont√™iner das sugest√µes
  sugC.innerHTML = ""; // Limpa o conte√∫do das sugest√µes
}

// Fun√ß√£o para comparar e avaliar as respostas
const toArr = v => Array.isArray(v) ? v : [v];
const evalList = (g, t) => g.length === t.length && g.every(v => t.includes(v)) ? "exact" : g.some(v => t.includes(v)) ? "partial" : "none";
const evalIP = (g, t) => g === t ? "exact" : g.slice(0, 2) === t.slice(0, 2) ? "partial" : "none";
const evalNum = (g, t) => g === t ? "exact" : g > t ? "down" : "up";
const evalFreq = (g, t) => g === t ? "exact" : Math.abs(g - t) <= 10 ? "partial" : g > t ? "down" : "up";
const evalText = (g, t) => g === t ? "exact" : g && t && g[0] === t[0] ? "partial" : "none";

// Fun√ß√£o que avalia uma tentativa em rela√ß√£o ao produto alvo
function evaluate(g) {
  return {
    tipo: evalList(toArr(g.tipo), toArr(target.tipo)),
    capacidade: evalNum(g.capacidade, target.capacidade),
    auth: evalList(toArr(g.auth), toArr(target.auth)),
    com: evalList(toArr(g.com), toArr(target.com)),
    grauIP: evalIP(g.grauIP, target.grauIP),
    freq: evalList(toArr(g.freq), toArr(target.freq)),
    rede: evalList(toArr(g.rede), toArr(target.rede)),
    fornecedor: evalText(g.fornecedor, target.fornecedor)
  };
}

// Fun√ß√£o para renderizar os resultados na tabela
function render(g, r) {
  const tr = document.createElement("tr");
  tr.innerHTML = `
    <td>${g.nome}</td>
    <td class="${r.tipo}">${toArr(g.tipo).join(", ")}</td>
    <td class="${r.capacidade}">${g.capacidade}</td>
    <td class="${r.auth}">${toArr(g.auth).join(", ")}</td>
    <td class="${r.com}">${toArr(g.com).join(", ")}</td>
    <td class="${r.grauIP}">${g.grauIP}</td>
    <td class="${r.freq}">${toArr(g.freq).join(", ")}</td>
    <td class="${r.rede}">${toArr(g.rede).join(", ")}</td>
    <td class="${r.fornecedor}">${g.fornecedor}</td>`;
  
  // Insere a nova linha no in√≠cio da tabela
  tbod.insertBefore(tr, tbod.firstChild);
}

// Fun√ß√£o para verificar se o jogador venceu
const win = r => Object.values(r).every(v => v === "exact");

// Evento de clique no bot√£o de palpite
document.getElementById("guessBtn").addEventListener("click", () => {
  if (!sb.value.trim()) return; // Verifica se o campo de pesquisa est√° vazio
  const opts = getSug(sb.value); // Obt√©m sugest√µes baseadas no valor inserido
  const guess = PRODUCTS.find(p => p.nome === sb.value) || opts[0]; // Tenta encontrar o produto baseado na pesquisa ou na sugest√£o
  if (guess) evaluateAndRender(guess); // Avalia e renderiza o resultado
  hideSug(); // Esconde as sugest√µes
});

// Evento de clique no bot√£o "Novo Jogo"
document.getElementById("newGameBtn").addEventListener("click", reset);

// Fun√ß√£o para avaliar e renderizar os resultados de um palpite
function evaluateAndRender(guess) {
  audioPalpite.play(); // Toca o som do palpite
  if (tries >= MAX_TRIES || gameOver) return; // Se o n√∫mero de tentativas for atingido ou o jogo j√° acabou, retorna

  const res = evaluate(guess); // Avalia o palpite
  render(guess, res); // Exibe o resultado na tabela
  tries++; // Incrementa o n√∫mero de tentativas
  sb.value = ""; // Limpa o campo de pesquisa

  // Se o jogador acertou
  if (win(res)) {
    audioVitoria.play(); // Toca o som de vit√≥ria
    emojiRain(["üéâ", "ü•≥", "üèÜ", "üéä"]); // Exibe emojis comemorativos
    showPopup(true, tries, target.nome); // Exibe o pop-up de vit√≥ria
    sb.disabled = true; // Desabilita o campo de pesquisa
    document.getElementById("guessBtn").disabled = true; // Desabilita o bot√£o de palpite
  } else if (tries === MAX_TRIES) {
    audioDerrota.play(); // Toca o som de derrota
    emojiRain(["üíÄ", "üò¢", "‚ò†Ô∏è", "üëé"]); // Exibe emojis de derrota
    showPopup(false, tries, target.nome); // Exibe o pop-up de derrota
    sb.disabled = true; // Desabilita o campo de pesquisa
    document.getElementById("guessBtn").disabled = true; // Desabilita o bot√£o de palpite
  }
}

// Fun√ß√£o para exibir o pop-up de vit√≥ria ou derrota
function showPopup(won, tries, product) {
  const popup = document.getElementById("gamePopup");
  const message = document.getElementById("popupMessage");
  const winnerExtras = document.getElementById("winnerExtras");

  if (won) {
    message.innerHTML = `üéâ <strong>Voc√™ ganhou!</strong><br>O produto era <strong>${product}</strong><br>Voc√™ acertou em <strong>${tries}</strong> tentativa(s)!`;
    winnerExtras.classList.remove("hidden"); // Mostra o campo de nome e exporta√ß√£o
  } else {
    message.innerHTML = `üíÄ <strong>Voc√™ perdeu!</strong><br>O produto era <strong>${product}</strong>`;
    winnerExtras.classList.add("hidden"); // Esconde o campo de nome e exporta√ß√£o
  }

  popup.classList.remove("hidden"); // Exibe o pop-up
}

// Fun√ß√£o para fechar o pop-up
function closePopup() {
  document.getElementById("gamePopup").classList.add("hidden"); // Adiciona a classe "hidden" para ocultar o pop-up
}

// Fun√ß√£o para exportar o resultado do jogo
function exportResult() {
  const name = document.getElementById("winnerName").value.trim() || "Jogador"; // Obt√©m o nome do jogador
  const produto = target.nome;
  const tentativas = tries;

  const canvas = document.createElement("canvas");
  const ctx = canvas.getContext("2d");

  canvas.width = 600;
  canvas.height = 300;

  // Fundo
  ctx.fillStyle = "#1a3a2a";
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  // T√≠tulo
  ctx.fillStyle = "#a0e0a0";
  ctx.font = "bold 24px Arial";
  ctx.fillText(`Parab√©ns ${name}, voc√™ ganhou!`, 40, 60);

  // Produto
  ctx.fillStyle = "#ffffff";
  ctx.font = "20px Arial";
  ctx.fillText(`O produto era: ${produto}`, 40, 120);

  // Tentativas
  ctx.fillText(`Voc√™ acertou em ${tentativas} tentativa(s)!`, 40, 160);

  // Emoji de comemora√ß√£o
  ctx.font = "32px Arial";
  ctx.fillText("üéâüéâüéâ", 40, 220);

  // Baixar o arquivo de imagem
  const link = document.createElement("a");
  link.download = `resultado-${name}.png`;
  link.href = canvas.toDataURL();
  link.click();
}

// Fun√ß√£o para simular o clique no bot√£o de palpite
function play() {
  document.getElementById("guessBtn").click();
}

// Fun√ß√£o para criar uma chuva de emojis de celebra√ß√£o
function emojiRain(emojis) {
  for (let i = 0; i < 30; i++) {
    const emoji = document.createElement("div");
    emoji.classList.add("emoji");
    emoji.style.left = `${Math.random() * 100}vw`;
    emoji.style.animationDuration = `${2 + Math.random() * 2}s`;
    emoji.textContent = emojis[Math.floor(Math.random() * emojis.length)];
    document.body.appendChild(emoji);

    setTimeout(() => {
      emoji.remove(); // Remove o emoji ap√≥s o tempo de anima√ß√£o
    }, 4000);
  }
}

// Inicializa o jogo
reset();
sb.disabled = false;
document.getElementById("guessBtn").disabled = false;
</script>
</body>
</html>

